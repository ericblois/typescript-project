{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/ericblois/Development/React Native/typescript-project/app/BusinessShopPages/BusinessProductsPage.tsx\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { styleValues, defaults } from \"../HelperFiles/StyleSheet\";\nimport { ProductCard } from \"../HelperFiles/CompIndex\";\nimport { prefetchImages, isProductCategory } from \"../HelperFiles/Constants\";\nimport BusinessDataHandler from \"../HelperFiles/BusinessDataHandler\";\n\nvar BusinessProducts = function (_Component) {\n  _inherits(BusinessProducts, _Component);\n\n  var _super = _createSuper(BusinessProducts);\n\n  function BusinessProducts() {\n    var _this;\n\n    _classCallCheck(this, BusinessProducts);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.productLists = {};\n    _this.productsToLoad = 0;\n    _this.state = {\n      thumbnailsFetched: false,\n      currentProductList: React.createElement(React.Fragment, null)\n    };\n\n    _this.createListElements = function (productsData) {\n      var thumbnailArray = [];\n      productsData.forEach(function (_ref) {\n        var category = _ref.category,\n            products = _ref.products;\n        _this.productLists[category] = React.createElement(View, {\n          style: styles.productContainer,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 17\n          }\n        }, React.createElement(FlatList, {\n          data: products,\n          keyExtractor: function keyExtractor(item, index) {\n            return index.toString();\n          },\n          renderItem: function renderItem(_ref2) {\n            var item = _ref2.item;\n            return React.createElement(ProductCard, {\n              productData: item,\n              onPress: function onPress() {\n                return _this.props.navigation.navigate(\"product\", {\n                  productData: item,\n                  productType: category\n                });\n              },\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 56,\n                columnNumber: 29\n              }\n            });\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 21\n          }\n        }));\n        products.forEach(function (_ref3) {\n          var images = _ref3.images;\n          thumbnailArray.push(images[0]);\n        });\n      });\n      prefetchImages(thumbnailArray).then(function () {\n        _this.setState({\n          thumbnailsFetched: true\n        });\n      });\n\n      _this.setState({\n        currentProductList: _this.productLists[productsData[0].category]\n      });\n    };\n\n    _this.loadProductsData = function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(BusinessDataHandler.getBusinessProductList(_this.props.businessData).then(function () {\n                _this.productsData = _this.props.businessData.productList;\n\n                _this.createListElements(_this.productsData);\n              }, function (e) {\n                throw e;\n              }));\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    return _this;\n  }\n\n  _createClass(BusinessProducts, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.loadProductsData().then(function () {\n        console.log(isProductCategory(_this2.props.businessData.productList[0]));\n      });\n    }\n  }, {\n    key: \"renderCategoryBar\",\n    value: function renderCategoryBar() {\n      var _this3 = this;\n\n      return React.createElement(FlatList, {\n        style: styles.categoryBar,\n        data: this.productsData,\n        horizontal: true,\n        keyExtractor: function keyExtractor(item, index) {\n          return index.toString();\n        },\n        ItemSeparatorComponent: function ItemSeparatorComponent() {\n          return React.createElement(View, {\n            style: {\n              width: styleValues.mediumPadding * 3\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 47\n            }\n          });\n        },\n        renderItem: function renderItem(_ref4) {\n          var item = _ref4.item,\n              index = _ref4.index;\n          return React.createElement(TouchableOpacity, {\n            style: styles.barContent,\n            onPress: function onPress() {\n              return _this3.setState({\n                currentProductList: _this3.productLists[item.category]\n              });\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 21\n            }\n          }, React.createElement(Text, {\n            style: styles.barText,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 25\n            }\n          }, item.category));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return !this.state.thumbnailsFetched ? React.createElement(ActivityIndicator, {\n        style: styles.loadingScreen,\n        size: \"large\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 48\n        }\n      }) : React.createElement(View, {\n        style: defaults.pageContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }\n      }, this.state.currentProductList, this.renderCategoryBar());\n    }\n  }]);\n\n  return BusinessProducts;\n}(Component);\n\nexport { BusinessProducts as default };\nvar styles = StyleSheet.create({\n  categoryBar: {\n    position: \"absolute\",\n    bottom: styleValues.winWidth * 0.15 + styleValues.mediumPadding * 2,\n    width: styleValues.winWidth - styleValues.mediumPadding * 2,\n    height: styleValues.winWidth * 0.15,\n    borderWidth: styleValues.minorBorderWidth,\n    borderRadius: styleValues.mediumPadding,\n    borderColor: styleValues.bordColor\n  },\n  barContent: {\n    height: \"100%\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  barText: {\n    fontSize: styleValues.largeTextSize\n  },\n  productContainer: {\n    height: \"100%\",\n    width: \"100%\",\n    alignItems: \"center\"\n  },\n  loadingScreen: {\n    position: \"absolute\",\n    backgroundColor: \"#fff\",\n    width: \"100%\",\n    height: \"100%\"\n  }\n});","map":{"version":3,"sources":["/Users/ericblois/Development/React Native/typescript-project/app/BusinessShopPages/BusinessProductsPage.tsx"],"names":["React","Component","styleValues","defaults","ProductCard","prefetchImages","isProductCategory","BusinessDataHandler","BusinessProducts","productLists","productsToLoad","state","thumbnailsFetched","currentProductList","createListElements","productsData","thumbnailArray","forEach","category","products","styles","productContainer","item","index","toString","props","navigation","navigate","productData","productType","images","push","then","setState","loadProductsData","getBusinessProductList","businessData","productList","e","console","log","categoryBar","width","mediumPadding","barContent","barText","loadingScreen","pageContainer","renderCategoryBar","StyleSheet","create","position","bottom","winWidth","height","borderWidth","minorBorderWidth","borderRadius","borderColor","bordColor","justifyContent","alignItems","fontSize","largeTextSize","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component, ReactNode } from \"react\";\nimport { View, Text, StyleSheet, ActivityIndicator, FlatList, TouchableOpacity } from \"react-native\";\nimport { styleValues, defaults } from \"../HelperFiles/StyleSheet\";\nimport { ProductCard } from \"../HelperFiles/CompIndex\";\nimport { prefetchImages, isProductList, isProductData, isProductOption, isProductOptionType, isProductCategory } from \"../HelperFiles/Constants\";\nimport { BottomTabNavigationProp } from '@react-navigation/bottom-tabs';\nimport { BusinessShopTabParamList } from \"../HelperFiles/Navigation\";\nimport { RouteProp } from '@react-navigation/native';\nimport { PrivateBusinessData, ProductCategory } from \"../HelperFiles/DataTypes\";\nimport BusinessDataHandler from \"../HelperFiles/BusinessDataHandler\";\n\ntype BusinessProductsNavigationProp = BottomTabNavigationProp<BusinessShopTabParamList, \"products\">;\n\ntype BusinessProductsRouteProp = RouteProp<BusinessShopTabParamList, \"products\">;\n\ntype Props = {\n    navigation: BusinessProductsNavigationProp,\n    route: BusinessProductsRouteProp,\n    businessData: PrivateBusinessData\n}\n\ntype State = {\n    thumbnailsFetched: boolean,\n    currentProductList: ReactNode\n}\n\nexport default class BusinessProducts extends Component<Props, State> {\n\n    productLists: { [category: string]: ReactNode } = {};\n    productsToLoad = 0;\n    productsData: ProductCategory[] | undefined;\n\n    state: Readonly<State> = {\n        thumbnailsFetched: false,\n        currentProductList: <></>\n    }\n\n    componentDidMount() {\n        this.loadProductsData().then(() => {\n            //console.log(productList[0].products[0].optionTypes[0].options[0])\n            console.log(isProductCategory(this.props.businessData.productList![0]))\n        })\n    }\n\n    createListElements = (productsData: ProductCategory[]) => {\n        let thumbnailArray: string[] = [];\n        // Iterate through each category of products\n       productsData.forEach(({category, products}) => {\n            // Create list of category pages\n            this.productLists[category] = (\n                <View style={styles.productContainer}>\n                    <FlatList\n                        data={products}\n                        keyExtractor={(item, index) => index.toString()}\n                        renderItem={({item}) => (\n                            <ProductCard productData={item} onPress={() => this.props.navigation.navigate(\"product\", {productData: item, productType: category})}/>\n                        )}\n                    />\n                </View>\n            )\n            // Prefetch all of the product thumbnail images\n            products.forEach(({images}) => {\n                thumbnailArray.push(images[0])\n            });\n        })\n        prefetchImages(thumbnailArray).then(() => {\n            this.setState({thumbnailsFetched: true})\n        });\n        this.setState({currentProductList: this.productLists[productsData[0].category]});\n    }\n\n    loadProductsData = async () => {\n        await BusinessDataHandler.getBusinessProductList(this.props.businessData).then(() => {\n            this.productsData = this.props.businessData.productList!;\n            this.createListElements(this.productsData);\n        }, (e) => {throw e});\n    }\n\n    renderCategoryBar() {\n        return (\n            <FlatList\n                style={styles.categoryBar}\n                data={this.productsData}\n                horizontal={true}\n                keyExtractor={(item, index) => index.toString()}\n                ItemSeparatorComponent={() => <View style={{width: styleValues.mediumPadding*3}}/>}\n                renderItem={({item, index}) => (\n                    <TouchableOpacity\n                        style={styles.barContent}\n                        onPress={() => this.setState({currentProductList: this.productLists[item.category]})}\n                    >\n                        <Text style={styles.barText}>{item.category}</Text>\n                    </TouchableOpacity>\n                )}\n            />\n        )\n    }\n\n    render() {\n        // Check if page is loaded\n        return !this.state.thumbnailsFetched ? <ActivityIndicator style={styles.loadingScreen} size={\"large\"}/> : (\n            <View style={defaults.pageContainer}>\n                {this.state.currentProductList}\n                {this.renderCategoryBar()}\n            </View>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    categoryBar: {\n        position: \"absolute\",\n        bottom: styleValues.winWidth * 0.15 + styleValues.mediumPadding*2,\n        width: styleValues.winWidth - styleValues.mediumPadding*2,\n        height: styleValues.winWidth * 0.15,\n        borderWidth: styleValues.minorBorderWidth,\n        borderRadius: styleValues.mediumPadding,\n        borderColor: styleValues.bordColor,\n    },\n    barContent: {\n        height: \"100%\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n    },\n    barText: {\n        fontSize: styleValues.largeTextSize\n    },\n    productContainer: {\n        height: \"100%\",\n        width: \"100%\",\n        alignItems: \"center\"\n    },\n    loadingScreen: {\n        position: \"absolute\",\n        backgroundColor: \"#fff\",\n        width: \"100%\",\n        height: \"100%\",\n    },\n});"]},"metadata":{},"sourceType":"module"}